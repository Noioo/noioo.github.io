{"meta":{"title":"Hello World","subtitle":null,"description":null,"author":"Senyag","url":"http://yoursite.com"},"pages":[{"title":"categories","date":"2018-11-08T08:16:57.877Z","updated":"2018-11-08T08:16:57.877Z","comments":true,"path":"categories/index.html","permalink":"http://yoursite.com/categories/index.html","excerpt":"","text":""},{"title":"","date":"2018-11-08T08:14:04.646Z","updated":"2018-11-08T08:14:04.646Z","comments":true,"path":"tags/index.html","permalink":"http://yoursite.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"spring-ioc-summary","slug":"spring-ioc-summary","date":"2018-11-08T08:24:17.000Z","updated":"2018-11-08T08:40:15.612Z","comments":true,"path":"2018/11/f19b/","link":"","permalink":"http://yoursite.com/2018/11/f19b/","excerpt":"å¯¹Spring IoCéƒ¨åˆ†çš„åŠŸèƒ½åšä¸€ä¸ªå¤§è‡´çš„æ¦‚è¿°, ğŸ˜‹ä¸è¿‡ä¸ä¼šé‚£ä¹ˆç»†è‡´, åªæ¶‰åŠå¸¸ç”¨çš„åŠŸèƒ½. ä¹Ÿä¸è¿‡å¤šä»‹ç»Springä¸­çš„ä¸€äº›æ¦‚å¿µ.","text":"å¯¹Spring IoCéƒ¨åˆ†çš„åŠŸèƒ½åšä¸€ä¸ªå¤§è‡´çš„æ¦‚è¿°, ğŸ˜‹ä¸è¿‡ä¸ä¼šé‚£ä¹ˆç»†è‡´, åªæ¶‰åŠå¸¸ç”¨çš„åŠŸèƒ½. ä¹Ÿä¸è¿‡å¤šä»‹ç»Springä¸­çš„ä¸€äº›æ¦‚å¿µ. Spring Framework | IoCversion spring version: 5.1.1.RELEASE spring-context spring-core spring-beans ç¤ºä¾‹ ä»ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æ¥å…¥æ‰‹è¿™ä¸ªæ¡†æ¶, å¹¶å°½å¯èƒ½å¤šçš„è´¯ç©¿æ•´ä¸ªæ¡†æ¶åŠŸèƒ½ä½“ç³». èƒŒæ™¯: è®©BeanUser, è°ƒç”¨Beané‡Œé¢çš„æ–¹æ³•. (å³BeanUseréœ€è¦ä¸€ä¸ªBeanå®ä¾‹) bean - Bean.java 12345public class Bean&#123; public void sayHello()&#123; System.out.print(\"Hello\"); &#125;&#125; ä¸€ä¸ªç®€å•çš„ç±», å½“ç„¶æ ¹æ®å®é™…å¼€å‘éœ€æ±‚, æˆ‘ä»¬æˆ–è®¸éœ€è¦ä¸€ä¸ªPOJO.. beanä½¿ç”¨è€… - BeanUser.java12345678910public class BeanUser&#123; private Bean bean; public void setBean(Bean bean)&#123; this.bean = bean; &#125; // use bean's method public void useBean()&#123; bean.sayHello(); &#125;&#125; å®ƒé€šè¿‡setBean()å‡½æ•°æ³¨å…¥Beanå¯¹è±¡, è€Œè¿™ä¸ªå¯¹è±¡å°†ä¼šç”±Springæ¥æ³¨å…¥. Spring é…ç½® - spring-beans.xml1234567&lt;!-- ignore the dtd --&gt;&lt;beans&gt; &lt;bean id=\"bean\" class=\"yag.Bean\"&gt;&lt;/bean&gt; &lt;bean id=\"beanUser\" class=\"yag.BeanUser\"&gt; &lt;property name=\"bean\" ref=\"bean\"/&gt; &lt;/bean&gt;&lt;/beans&gt; æ‰§è¡Œè€… - Runner.java1234567public void forXmlConfig()&#123; // load the config ApplicationContext context = new ClassPathXmlApplicationContext(\"spring-beans.xml\"); // get bean BeanUser beanUser = (BeanUser)context.getBean(BeanUser.class); beanUser.useBean(); // use bean&#125; ç½—åˆ—éƒ¨åˆ†ä»£ç . å°ç»“ä»ä¸Šé¢çœ‹åˆ°, ä¸€å…±å››ä¸ªä»£ç ç‰‡æ®µ, å¯ä»¥å°†æ¡†æ¶åˆ†ä¸ºä¸‰ä¸ªåŠŸèƒ½éƒ¨åˆ†æ¥å­¦ä¹ : Bean(Bean å’Œ BeanUseréƒ½æ˜¯Bean) Beançš„é…ç½® æ‰§è¡Œè€… è¦æ³¨æ„çš„æ˜¯, ä¸æ˜¯è¯´å†™åœ¨XMLé…ç½®ä¸­çš„å°±è¦åˆ’åˆ†ç»™é…ç½®, æœ‰äº›å†…å®¹å®é™…ä¸Šæ˜¯ä¸ºå…¶ä»–éƒ¨åˆ†å‡†å¤‡çš„. è¿™ä¸ªåˆ’åˆ†æ˜¯æŒ‰ç…§åŠŸèƒ½æ¥åˆ’åˆ†çš„. Bean éƒ¨åˆ† äº†è§£Beanå®šä¹‰ä»¥åŠä¸€äº›é™„åŠ æ€§åŠŸèƒ½. è¦äº†è§£Bean, å°±éœ€è¦ä»ä¾èµ–å…¥æ‰‹. ä»€ä¹ˆæ˜¯ä¾èµ–? ç®€å•çš„è¯´å°±æ˜¯éœ€è¦è°çš„å®ä¾‹å°±ä¾èµ–è°. ä¾èµ–æ³¨å…¥ - éœ€è¦ä¸€ä¸ªBeanå®ä¾‹åœ¨ç¤ºä¾‹ä¸­æ‰€ä½¿ç”¨çš„æ–¹å¼æ˜¯Setterå‡½æ•°æ³¨å…¥(åˆç§°è®¾å€¼æ³¨å…¥, å³é€šè¿‡ä¸€ä¸ªå‡½æ•°çš„å‚æ•°æ¥æ³¨å…¥), è¿™ç§æ–¹å¼æºäºJavaBean. è¿˜æœ‰ä¸€ç§æ³¨å…¥ç§°ä¸ºæ„é€ æ³¨å…¥, ä¸è¿‡ç”±äºSpringçš„æ¡†æ¶â€ä¸»å¼ â€, å®ƒè¢«åˆ’åˆ†åˆ°è‡ªåŠ¨è£…é…ä¸­å»äº†. åœ¨BeanUserç±»ä¸­çš„setteræ–¹æ³•ä¸€èˆ¬å¦‚ä¸‹: 12private Bean bean;public void setBean(Bean bean)&#123; this.bean = bean; &#125; åœ¨Springä¸­çš„é…ç½®æœ‰ä¸¤ç§: XMLå’ŒJavaConfig XML Beanå®šä¹‰: &lt;bean id=&quot;bean&quot; class=&quot;yag.Bean&quot;&gt;&lt;/bean&gt; BeanUseæ³¨å…¥å®šä¹‰: 123&lt;bean id=\"beanUser\" class=\"yag.BeanUser\"&gt; &lt;property name=\"bean\" ref=\"bean\"/&gt;&lt;/bean&gt; JavaConfig^JavaConfig è‡ªåŠ¨è£…é… - è‡ªåŠ¨æ³¨å…¥Beanå®ä¾‹ è‡ªåŠ¨è£…é…æŒ‡çš„æ˜¯è‡ªåŠ¨æ³¨å…¥Beanç¤ºä¾‹. ç›®çš„æ˜¯èŠ‚çº¦è¿‡å¤šçš„ä»£ç é‡, æœ‰åŠ©äºBeançš„ç®¡ç†. åœ¨Springä¸­è‡ªåŠ¨è£…é…æœ‰ä¸‰ç§: byName - é€šè¿‡æ³¨å…¥å‚æ•°çš„å±æ€§åæ¥åŒ¹é…Bean id 12345&lt;!-- byName --&gt;&lt;!-- å»æ‰äº†property, æ–°å¢äº†å±æ€§autowire=\"byName\" --&gt;&lt;bean id=\"beanUser\" class=\"yag.BeanUser\" autowire=\"byName\"&gt; &lt;!-- BeanUserå°†ç”¨å±æ€§åæ¥åŒ¹é…Bean id --&gt;&lt;/bean&gt; byType - é€šè¿‡æ³¨å…¥å‚æ•°çš„ç±»å‹æ¥åŒ¹é…Bean ç±»å‹. 12345&lt;!-- byType --&gt;&lt;bean id=\"beanUser\" class=\"yag.BeanUser\" autowire=\"byType\"&gt; &lt;!-- å®ƒå°†ä¼šä»¥å®šä¹‰çš„å±æ€§å€¼çš„ç±»å‹æ¥åŒ¹é…è¿™é‡Œçš„Beanå --&gt;&lt;/bean&gt;&lt;!-- å› ä¸ºæ˜¯æ ¹æ®ç±»å‹åŒ¹é…çš„, æˆ‘ä»¬ç”šè‡³è¿ç»™è¿™ä¸ªBeanèµ·idéƒ½ä¸ç”¨ --&gt; constructor-arg - æ„é€ æ³¨å…¥, æŒ‡å®šBean id 1234&lt;!-- constructor-arg --&gt;&lt;bean class=\"yag.BeanUser\"&gt; &lt;constructor-arg ref=\"bean\"/&gt;&lt;/bean&gt; é™å®šæ“ä½œ - ç²¾å‡†åŒ¹é…åˆ°Bean123// on construction method:public BeanUser(@Qualifier(value=\"the_bean_id\")Bean bean)&#123;this.bean=bean;&#125;// on setter method: same as construction method è¿™ä¸ªä¸€èˆ¬ç”¨äºé…åˆè‡ªåŠ¨è£…é…ä½¿ç”¨, å½“è‡ªåŠ¨è£…é…åŒ¹é…ä¸åˆ°æ—¶, å†ç”¨è¿™ä¸ªæ³¨è§£è¿›ä¸€æ­¥åŒ¹é…åˆ°å…·ä½“çš„Bean id. éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ç”¨æ³¨è§£: &lt;context:annotation-config/&gt; Config éƒ¨åˆ†Beançš„ä½œç”¨åŸŸ12&lt;bean id=\"...\" class=\"...\" scope=\"&#123;singleton(default)|prototype|request|session|global-session&#125;\"/&gt; ä½œç”¨åŸŸ æè¿° singleton åœ¨spring IoCå®¹å™¨ä»…å­˜åœ¨ä¸€ä¸ªBeanå®ä¾‹ï¼ŒBeanä»¥å•ä¾‹æ–¹å¼å­˜åœ¨ï¼Œé»˜è®¤å€¼ prototype æ¯æ¬¡ä»å®¹å™¨ä¸­è°ƒç”¨Beanæ—¶ï¼Œéƒ½è¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œå³æ¯æ¬¡è°ƒç”¨getBean()æ—¶ï¼Œç›¸å½“äºæ‰§è¡ŒnewXxxBean() request æ¯æ¬¡HTTPè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Beanï¼Œè¯¥ä½œç”¨åŸŸä»…é€‚ç”¨äºWebApplicationContextç¯å¢ƒ session åŒä¸€ä¸ªHTTP Sessionå…±äº«ä¸€ä¸ªBeanï¼Œä¸åŒSessionä½¿ç”¨ä¸åŒçš„Beanï¼Œä»…é€‚ç”¨äºWebApplicationContextç¯å¢ƒ global-session ä¸€èˆ¬ç”¨äºPortletåº”ç”¨ç¯å¢ƒï¼Œè¯¥è¿ç”¨åŸŸä»…é€‚ç”¨äºWebApplicationContextç¯å¢ƒ Beançš„ç»§æ‰¿å…³ç³»12345678&lt;!-- çˆ¶ bean è‡ªèº«ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œå› ä¸ºå®ƒæ˜¯ä¸å®Œæ•´çš„ï¼Œè€Œä¸”å®ƒä¹Ÿè¢«æ˜ç¡®åœ°æ ‡è®°ä¸ºæŠ½è±¡çš„ã€‚--&gt;&lt;bean id=\"beanTeamplate\" abstract=\"true\"&gt; &lt;property name=\"message1\" value=\"Hello World!\"/&gt;&lt;/bean&gt;&lt;bean id=\"helloChina\" class=\"com.Hello\" parent=\"beanTeamplate\"&gt; &lt;property name=\"message1\" value=\"Hello China!\"/&gt;&lt;/bean&gt; é…ç½®importJava Config12345678910import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;@Configurationpublic class JavaConfig&#123; @Bean // or: @Bean(name=\"beanId\") public Bean bean()&#123; return new Bean(); &#125;&#125; Beanç±», JavaConfigç±»éƒ½éœ€è¦è¢«æ³¨è§£ @Configuration éœ€è¦åœ¨XMLé…ç½®æ–‡ä»¶ä¸­å¯ç”¨æ³¨è§£: 12&lt;context:annotation-config/&gt;&lt;context:component-scan base-package=\"yag\"/&gt; ImportImportçš„ä½œç”¨æ˜¯æ•´åˆé…ç½®æ–‡ä»¶, è®©Runner^Runneråªéœ€è¦åŠ è½½ä¸€ä¸ªé…ç½®æ–‡ä»¶å³å¯. xml configYou can use the application context constructor to load bean definitions from all these XML fragments. 12345678&lt;beans&gt; &lt;!-- runner just only load this xml file --&gt; &lt;import resource=\"services.xml\"/&gt; &lt;import resource=\"resources/messageSource.xml\"/&gt; &lt;import resource=\"/resources/themeSource.xml\"/&gt; &lt;bean id=\"bean1\" class=\"...\"/&gt; &lt;bean id=\"bean2\" class=\"...\"/&gt;&lt;/beans&gt; java config123456789101112131415161718@Configurationpublic class ConfigA &#123; @Bean public A a() &#123; return new A(); &#125;&#125;@Configuration@Import(ConfigA.class)public class ConfigB &#123; // runner just only load it @Bean public B b() &#123; return new B(); &#125;&#125; Runner éƒ¨åˆ†1234567891011121314151617import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;import org.springframework.context.annotation.AnnotationConfigApplicationContext;public void forXmlConfig()&#123; ApplicationContext context = new ClassPathXmlApplicationContext(\"spring-beans.xml\"); // get Bean BeanUser beanUser = (BeanUser)context.getBean(BeanUser.class);&#125;public void forJavaConfig()&#123; ApplicationContext context = new AnnotationConfigApplicationContext(JavaConfig.class); // get Bean BeanUser beanUser = (BeanUser)context.getBean(BeanUser.class); //or getBean(\"BeanId\")&#125; å…¶ä»–å†…å®¹ JSR-250 JSR-330 å…³äºBean å®¹å™¨ Bean Context Factorys","categories":[{"name":"Develop","slug":"Develop","permalink":"http://yoursite.com/categories/Develop/"},{"name":"Java","slug":"Develop/Java","permalink":"http://yoursite.com/categories/Develop/Java/"},{"name":"Code","slug":"Develop/Java/Code","permalink":"http://yoursite.com/categories/Develop/Java/Code/"}],"tags":[{"name":"java","slug":"java","permalink":"http://yoursite.com/tags/java/"},{"name":"spring","slug":"spring","permalink":"http://yoursite.com/tags/spring/"}]}]}